--- a/net/minecraft/world/level/block/TrapDoorBlock.java
+++ b/net/minecraft/world/level/block/TrapDoorBlock.java
@@ -33,6 +33,7 @@
 import net.minecraft.world.phys.BlockHitResult;
 import net.minecraft.world.phys.shapes.CollisionContext;
 import net.minecraft.world.phys.shapes.VoxelShape;
+import org.bukkit.event.block.BlockRedstoneEvent; // CraftBukkit
 
 public class TrapDoorBlock extends HorizontalDirectionalBlock implements SimpleWaterloggedBlock {
 
@@ -144,11 +139,24 @@
         if (!level.isClientSide) {
             boolean flag1 = level.hasNeighborSignal(blockpos);
 
-            if (flag1 != (Boolean) blockstate.getValue(TrapDoorBlock.POWERED)) {
-                if ((Boolean) blockstate.getValue(TrapDoorBlock.OPEN) != flag1) {
-                    blockstate = (BlockState) blockstate.setValue(TrapDoorBlock.OPEN, flag1);
-                    this.playSound((Player) null, level, blockpos, flag1);
+            if (flag1 != (Boolean) state.getValue(TrapDoorBlock.POWERED)) {
+                // CraftBukkit start
+                org.bukkit.World bworld = level.getWorld();
+                org.bukkit.block.Block bblock = bworld.getBlockAt(pos.getX(), pos.getY(), pos.getZ());
+
+                int power = bblock.getBlockPower();
+                int oldPower = (Boolean) state.getValue(OPEN) ? 15 : 0;
+
+                if (oldPower == 0 ^ power == 0 || block.defaultBlockState().isSignalSource()) {
+                    BlockRedstoneEvent eventRedstone = new BlockRedstoneEvent(bblock, oldPower, power);
+                    level.getCraftServer().getPluginManager().callEvent(eventRedstone);
+                    flag1 = eventRedstone.getNewCurrent() > 0;
                 }
+                // CraftBukkit end
+                if ((Boolean) state.getValue(TrapDoorBlock.OPEN) != flag1) {
+                    state = (IBlockData) state.setValue(TrapDoorBlock.OPEN, flag1);
+                    this.playSound((Player) null, level, pos, flag1);
+                }
 
                 level.setBlock(blockpos, (BlockState) blockstate.setValue(TrapDoorBlock.POWERED, flag1), 2);
                 if ((Boolean) blockstate.getValue(TrapDoorBlock.WATERLOGGED)) {
