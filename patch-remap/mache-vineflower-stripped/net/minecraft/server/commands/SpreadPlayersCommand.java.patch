--- a/net/minecraft/server/commands/SpreadPlayersCommand.java
+++ b/net/minecraft/server/commands/SpreadPlayersCommand.java
@@ -247,16 +203,10 @@
                 position = positions[i++];
             }
 
-            entity.teleportTo(
-                level,
-                (double)Mth.floor(position.x) + 0.5,
-                (double)position.getSpawnY(level, maxHeight),
-                (double)Mth.floor(position.z) + 0.5,
-                Set.of(),
-                entity.getYRot(),
-                entity.getXRot()
-            );
-            double d1 = Double.MAX_VALUE;
+            entity.teleportTo(level, (double) Mth.floor(commandspreadplayers_a.x) + 0.5D, (double) commandspreadplayers_a.getSpawnY(level, maxHeight), (double) Mth.floor(commandspreadplayers_a.z) + 0.5D, Set.of(), entity.getYRot(), entity.getXRot(), org.bukkit.event.player.PlayerTeleportEvent.TeleportCause.COMMAND); // CraftBukkit - handle teleport reason
+            d1 = Double.MAX_VALUE;
+            SpreadPlayersCommand.Position[] acommandspreadplayers_a1 = positions;
+            int k = positions.length;
 
             for (SpreadPlayersCommand.Position position1 : positions) {
                 if (position != position1) {
