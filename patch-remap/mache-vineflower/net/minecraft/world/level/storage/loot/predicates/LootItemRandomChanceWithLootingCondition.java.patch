--- a/net/minecraft/world/level/storage/loot/predicates/LootItemRandomChanceWithLootingCondition.java
+++ b/net/minecraft/world/level/storage/loot/predicates/LootItemRandomChanceWithLootingCondition.java
@@ -3,7 +3,6 @@
 import com.google.common.collect.ImmutableSet;
 import com.mojang.serialization.Codec;
 import com.mojang.serialization.codecs.RecordCodecBuilder;
-import com.mojang.serialization.codecs.RecordCodecBuilder.Instance;
 import java.util.Set;
 import net.minecraft.world.entity.Entity;
 import net.minecraft.world.entity.LivingEntity;
@@ -13,14 +12,11 @@
 import net.minecraft.world.level.storage.loot.parameters.LootContextParams;
 
 public record LootItemRandomChanceWithLootingCondition(float percent, float lootingMultiplier) implements LootItemCondition {
-    public static final Codec<LootItemRandomChanceWithLootingCondition> CODEC = RecordCodecBuilder.create(
-        instance -> instance.group(
-                    Codec.FLOAT.fieldOf("chance").forGetter(LootItemRandomChanceWithLootingCondition::percent),
-                    Codec.FLOAT.fieldOf("looting_multiplier").forGetter(LootItemRandomChanceWithLootingCondition::lootingMultiplier)
-                )
-                .apply(instance, LootItemRandomChanceWithLootingCondition::new)
-    );
 
+    public static final Codec<LootItemRandomChanceWithLootingCondition> CODEC = RecordCodecBuilder.create((instance) -> {
+        return instance.group(Codec.FLOAT.fieldOf("chance").forGetter(LootItemRandomChanceWithLootingCondition::percent), Codec.FLOAT.fieldOf("looting_multiplier").forGetter(LootItemRandomChanceWithLootingCondition::lootingMultiplier)).apply(instance, LootItemRandomChanceWithLootingCondition::new);
+    });
+
     @Override
     public LootItemConditionType getType() {
         return LootItemConditions.RANDOM_CHANCE_WITH_LOOTING;
@@ -31,18 +27,25 @@
         return ImmutableSet.of(LootContextParams.KILLER_ENTITY);
     }
 
-    @Override
     public boolean test(LootContext context) {
-        Entity entity = context.getParamOrNull(LootContextParams.KILLER_ENTITY);
+        Entity entity = (Entity) context.getParamOrNull(LootContextParams.KILLER_ENTITY);
         int i = 0;
+
         if (entity instanceof LivingEntity) {
-            i = EnchantmentHelper.getMobLooting((LivingEntity)entity);
+            i = EnchantmentHelper.getMobLooting((LivingEntity) entity);
         }
+        // CraftBukkit start - only use lootingModifier if set by Bukkit
+        if (context.hasParam(LootContextParams.LOOTING_MOD)) {
+            i = context.getParamOrNull(LootContextParams.LOOTING_MOD);
+        }
+        // CraftBukkit end
 
-        return context.getRandom().nextFloat() < this.percent + (float)i * this.lootingMultiplier;
+        return context.getRandom().nextFloat() < this.percent + (float) i * this.lootingMultiplier;
     }
 
     public static LootItemCondition.Builder randomChanceAndLootingBoost(float chance, float lootingMultiplier) {
-        return () -> new LootItemRandomChanceWithLootingCondition(chance, lootingMultiplier);
+        return () -> {
+            return new LootItemRandomChanceWithLootingCondition(chance, lootingMultiplier);
+        };
     }
 }
